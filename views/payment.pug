extends layout

block css
    link(rel="stylesheet" href="/css/payment.css")

block content
    .payment-page.container.py-4

        h2.page-title.mb-4 Yolcu Bilgileri & Bilet Ä°ÅŸlemi

        if error
            .alert.alert-danger= error

        .row.g-4

            // SOL â€” SEFER BÄ°LGÄ°LERÄ°
            .col-lg-4.col-12
                .card.shadow-sm.p-3
                    h5.mb-3 GidiÅŸ Sefer Bilgileri

                    ul.list-unstyled.trip-info.mt-3
                        li
                            strong KalkÄ±ÅŸ:
                            |  #{trip.fromStr}

                        li
                            strong VarÄ±ÅŸ:
                            |  #{trip.toStr}

                        li
                            strong Tarih:
                            |  #{trip.date}

                        li
                            strong Saat:
                            |  #{trip.time}

                        li
                            strong Koltuklar:
                            |  #{seatNumbers.join(", ")}


            // SAÄž â€” YOLCU + Ä°LETÄ°ÅžÄ°M â†’ BÄ°LET OLUÅžTURMA
            .col-lg-8.col-12

                form#ticketSubmit(method="POST")

                    // ðŸ”¥ Yolcu Bilgileri
                    .card.shadow-sm.p-4.mb-4
                        h5.mb-3 Yolcu Bilgileri

                        input(type="hidden" name="paymentId" value=paymentId)

                        each seat, idx in seatNumbers
                            .passenger-box.border.rounded.p-3.mb-3
                                h6.mb-3 #{seat} Noâ€™lu Koltuk â€“ #{genders[idx]=="m" ? "Erkek" : "KadÄ±n"}

                                input(type="hidden" name="seatNumbers[]" value=seat)
                                input(type="hidden" name="genders[]" value=genders[idx])

                                .row.g-3
                                    .col-md-6
                                        label.form-label Ad
                                        input.form-control(type="text" name=`name[]` required)

                                    .col-md-6
                                        label.form-label Soyad
                                        input.form-control(type="text" name=`surname[]` required)

                                .row.g-3.mt-1
                                    .col-12
                                        label.form-label T.C. Kimlik No
                                        input.form-control(type="text" name=`idNumber[]` required)


                    // ðŸ”¥ Ä°LETÄ°ÅžÄ°M
                    .card.shadow-sm.p-4.mb-4
                        h5.mb-3 Ä°letiÅŸim Bilgileri

                        .row.g-3
                            .col-md-6
                                label.form-label Telefon
                                input.form-control(type="tel" name="phone" required)

                            .col-md-6
                                label.form-label Email
                                input.form-control(type="email" name="email" required)


                    .text-center.mt-3
                        input.me-2(type="checkbox" required)
                        | KullanÄ±m sÃ¶zleÅŸmesini okudum, kabul ediyorum.

                    button.btn.btn-accent.btn-lg.w-100.mt-3#confirmTicket
                        i.bi.bi-ticket-perforated.me-2
                        | Bilet OluÅŸtur

block js
  script(src="/js/payment.js")

//- extends layout

//- block css
//-     link(rel="stylesheet" href="/css/payment.css")

//- block content
//-     .payment-page.container.py-4

//-         h2.page-title.mb-4 Ã–deme ve Yolcu Bilgileri

//-         if error
//-             .alert.alert-danger= error

//-         .row.g-4

//-             // SOL: SEFER BÄ°LGÄ°LERÄ°
//-             .col-lg-4.col-12
//-                 .card.shadow-sm.p-3
//-                     .d-flex.justify-content-between.align-items-center.mb-2
//-                         h5.mb-0 GidiÅŸ Sefer Bilgileri

//-                     ul.list-unstyled.mt-3.trip-info
//-                         li
//-                             i.bi.bi-geo-alt.me-2.text-primary
//-                             strong KalkÄ±ÅŸ:
//-                             |  #{trip.fromStr}

//-                         li
//-                             i.bi.bi-geo.me-2.text-primary
//-                             strong VarÄ±ÅŸ:
//-                             |  #{trip.toStr}

//-                         li
//-                             i.bi.bi-clock.me-2.text-primary
//-                             strong Hareket:
//-                             |  #{trip.date} â€“ #{trip.time}

//-                         li
//-                             i.bi.bi-123.me-2.text-primary
//-                             strong Koltuk(lar):
//-                             |  #{seatNumbers.join(", ")}

//-             // SAÄž: YOLCU + Ä°LETÄ°ÅžÄ°M + Ã–DEME
//-             .col-lg-8.col-12

//-                 // YOLCU BÄ°LGÄ°LERÄ°
//-                 .card.shadow-sm.p-4.mb-4
//-                     h5.mb-3 GidiÅŸ Yolcu Bilgileri

//-                     each seat, idx in seatNumbers
//-                         .passenger-box.p-3.border.rounded.mb-4
//-                             h6.mb-3 #{seat} Noâ€™lu Koltuk â€“ #{genders[idx] == 'm' ? 'Erkek' : 'KadÄ±n'}

//-                             .row.g-3
//-                                 .col-md-6.col-12
//-                                     label.form-label Ad
//-                                     input.form-control(type="text", name=`name_${idx}`, required)

//-                                 .col-md-6.col-12
//-                                     label.form-label Soyad
//-                                     input.form-control(type="text", name=`surname_${idx}`, required)


//-                             .row.g-3.mt-1
//-                                 .col-md-12.col-12
//-                                     label.form-label T.C. Kimlik No
//-                                     input.form-control(type="text", name=`idNumber_${idx}`, required)

//-                 // Ä°LETÄ°ÅžÄ°M
//-                 .card.shadow-sm.p-4.mb-4
//-                     h5.mb-3 Ä°letiÅŸim Bilgileri

//-                     .row.g-3
//-                         .col-md-6.col-12
//-                             label.form-label Cep Telefonu
//-                             input.form-control(type="tel" name="contactPhone", required)

//-                         .col-md-6.col-12
//-                             label.form-label E-Posta
//-                             input.form-control(type="email" name="contactEmail", required)

//-                     .form-check.mt-2
//-                         input.form-check-input(type="checkbox" id="smsKVKK")
//-                         label.form-check-label(for="smsKVKK", required)  
//-                             | SMS ile bilet almak ve kampanya duyurularÄ±nÄ± kabul ediyorum.

//-                 p.text-center.text-muted.mt-3.mb-4
//-                     input.me-2(type="checkbox", required)
//-                     | Mesafeli SatÄ±ÅŸ SÃ¶zleÅŸmesini okudum, kabul ediyorum.
//-                 // Ã–DEME
//-                 form#paymentForm(method="POST", action=`/payment/${paymentId}/submit`)
//-                     .card.shadow-sm.p-4
//-                         h5.mb-3 Ã–deme Bilgileri

//-                         .row.g-3
//-                             .col-md-6.col-12
//-                                 label.form-label Kart Ãœzerindeki Ä°sim
//-                                 input.form-control(type="text" name="cardName", required)

//-                             .col-md-6.col-12
//-                                 label.form-label Kart NumarasÄ±
//-                                 input.form-control(type="text" name="cardNumber" minlength="16" maxlength="16", required)

//-                         .row.g-3.mt-1
//-                             .col-md-4.col-12
//-                                 label.form-label Son Kullanma
//-                                 input.form-control(type="text" name="exp" placeholder="AA/YY", required)

//-                             .col-md-4.col-12
//-                                 label.form-label CVC
//-                                 input.form-control(type="text" name="cvc" minlength="3" maxlength="4", required)

//-                             .col-md-4.col-12
//-                                 label.form-label Kupon
//-                                 .input-group
//-                                     input.form-control(type="text" name="coupon")
//-                                     button.btn.btn-outline-secondary(type="button") Uygula

//-                         .total-box.mt-4.p-3.border.rounded.d-flex.justify-content-between.align-items-center
//-                             span.fw-bold Ã–denecek Tutar
//-                             span.fs-4.fw-bold.text-accent #{totalPrice} TL

//-                         button.btn.btn-accent.btn-lg.w-100.mt-3(type="submit")
//-                             i.bi.bi-credit-card.me-2
//-                             | Ã–deme Yap